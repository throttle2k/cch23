+./scripts/init_db.sh:3> set -eo pipefail
+./scripts/init_db.sh:5> command -v psql
+./scripts/init_db.sh:5> [ -x /usr/bin/psql ']'
+./scripts/init_db.sh:10> command -v sqlx
+./scripts/init_db.sh:10> [ -x /home/throttle/.cargo/bin//sqlx ']'
+./scripts/init_db.sh:15> DB_USER=postgres 
+./scripts/init_db.sh:16> DB_PASSWORD=password 
+./scripts/init_db.sh:17> DB_NAME=postgres 
+./scripts/init_db.sh:18> DB_PORT=16695 
+./scripts/init_db.sh:20> [[ -z '' ]]
+./scripts/init_db.sh:22> docker pod create --name postgres -p 9876:80 -p 16695:5432
d601a94237a92dfa779dba55352018cde981a8fc8a6a8fde120edea2d8b1bd7e
+./scripts/init_db.sh:23> docker run '--pod=postgres' -e 'PGADMIN_DEFAULT_EMAIL=admin@email.com' -e 'PGADMIN_DEFAULT_PASSWORD=password' --name pgadmin -d dpage/pgadmin4
78f58e7099b1dae8563fa1bafb4f8c4681c65b85daba4e37a71ed74bee205a7a
+./scripts/init_db.sh:28> docker run '--pod=postgres' -e 'POSTGRES_USER=postgres' -e 'POSTGRES_PASSWORD=password' -e 'POSTGRES_DB=postgres' --name postgres -d postgres
a6548bc914cb693419d3270fec40c7fdf057a816686a25d1c69ed34d05ca34c4
+./scripts/init_db.sh:38> export PGPASSWORD=password
+./scripts/init_db.sh:39> psql -h localhost -U postgres -p 16695 -d postgres -c '\q'
psql: errore: connection to server at "localhost" (::1), port 16695 failed: Connessione rifiutata
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 16695 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
+./scripts/init_db.sh:40> echo 'Postgres still unavailable - back to sleep'
Postgres still unavailable - back to sleep
+./scripts/init_db.sh:41> sleep 1
+./scripts/init_db.sh:39> psql -h localhost -U postgres -p 16695 -d postgres -c '\q'
psql: errore: connection to server at "localhost" (::1), port 16695 failed: Connessione rifiutata
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 16695 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
+./scripts/init_db.sh:40> echo 'Postgres still unavailable - back to sleep'
Postgres still unavailable - back to sleep
+./scripts/init_db.sh:41> sleep 1
+./scripts/init_db.sh:39> psql -h localhost -U postgres -p 16695 -d postgres -c '\q'
psql: errore: connection to server at "localhost" (::1), port 16695 failed: Connessione rifiutata
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 16695 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
+./scripts/init_db.sh:40> echo 'Postgres still unavailable - back to sleep'
Postgres still unavailable - back to sleep
+./scripts/init_db.sh:41> sleep 1
+./scripts/init_db.sh:39> psql -h localhost -U postgres -p 16695 -d postgres -c '\q'
psql: errore: connection to server at "localhost" (::1), port 16695 failed: Connessione rifiutata
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 16695 failed: FATAL:  the database system is starting up
+./scripts/init_db.sh:40> echo 'Postgres still unavailable - back to sleep'
Postgres still unavailable - back to sleep
+./scripts/init_db.sh:41> sleep 1
+./scripts/init_db.sh:39> psql -h localhost -U postgres -p 16695 -d postgres -c '\q'
+./scripts/init_db.sh:44> echo 'Postgres is up and running on port 16695!'
Postgres is up and running on port 16695!
+./scripts/init_db.sh:46> export DATABASE_URL=postgres://postgres:password@localhost:16695/postgres
+./scripts/init_db.sh:47> sqlx database create
+./scripts/init_db.sh:48> sqlx migrate run
Applied 20240915103037/migrate init (219.992575ms)
+./scripts/init_db.sh:50> echo 'Postgres database has been migrated, ready to go!'
Postgres database has been migrated, ready to go!
